Sleeper-Rails
======
This is the Rails plugin for Sleeper - (http://sleeperapp.com).

Quickstart
=====
- Sign up for a Sleeper account at http://sleeperapp.com

- Install the Rails plugin. 
	
	script/plugin install git://github.com/adrianpike/sleeper-rails 
			-or- 
	git submodule add git://github.com/adrianpike/sleeper-rails vendor/plugins/sleeper-rails
	
- Run rake sleeper:install. It will prompt you for your client key from your Sleeper account, as well as some basic default functionality to use in the event that sleeper-rails cannot pull down a real config from your Sleeper account. It will also check for a sane environment.

- You're done!

Requirements
=====
- MySQL or PostgreSQL for explaining. Other backends work fine, but won't generate explanations.
- Any Rack-based app.
- ActiveRecord for unused attribute analysis.

Known Issues
=====
- Heroku does not support git submodules.
- Sleeper-Rails & other patches onto ActiveRecord connections can collide.
- Lots of room for refactoring & optimization.
- There is a known bug involving the peeker not peeking into already loaded classes.
- - This has to do with ActiveRecord having already created the attribute read methods.

TODO
=====
- Authenticate & encrypt updates.
- Better stack trace collection.
- Better handling of internal exceptions, rather than barfing all over the poor user's app.
- http://wiki.opscode.com/display/ohai/Home

Basic Sleeper-Rails Architecture
=====
Sleeper::Configurator
- Configurator handles all the configuration for Sleeper-Rails.

Sleeper::Statistics
- Store data, aggregate it, and JSON it upstream to Sleeper with some sort of hash authentication.

Sleeper::Explainer
- Hack into all the AR queries, and run a WHERE for that query.
	- Store both the original query and the WHERE, as well as the line number & filename of the original query.

Sleeper::Tracer
- Time all my ActionController requests - bust into the default benchmarking.
	- Send upstream total time, DB time, and view time, as well as the controller, action, and URL.
- Run a Ruby trace graph on every ActionController request, show me where I'm spending the most time.

Sleeper::AttributePeeker
- Fancy magic to let us know what attributes got SELECT'ed but weren't read. It doesn't work yet.

Credits!
=======
Adrian Pike - (http://github.com/adrianpike)
Amiel Martin - (http://github.com/amiel)

Copyright (c) 2009 Pike Engineering, released under the MIT license
